{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _xdate = require('xdate');\n\nvar _xdate2 = _interopRequireDefault(_xdate);\n\nvar _DayPickerInput = require('react-day-picker/DayPickerInput');\n\nvar _DayPickerInput2 = _interopRequireDefault(_DayPickerInput);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _DateContainer = require('../../styles/DateContainer');\n\nvar _DateContainer2 = _interopRequireDefault(_DateContainer);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _utils = require('../../utils');\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DateRange = function (_Component) {\n  _inherits(DateRange, _Component);\n\n  function DateRange(props) {\n    _classCallCheck(this, DateRange);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      currentDate: null,\n      dateHovered: null\n    };\n    _this.locked = false;\n    props.setQueryListener(props.componentId, props.onQueryChange, null);\n    return _this;\n  }\n\n  DateRange.prototype.componentWillMount = function componentWillMount() {\n    this.props.addComponent(this.props.componentId);\n    this.setReact(this.props);\n\n    if (this.props.selectedValue) {\n      // parsing string values from selectedValue to date objects for DayPicker\n      // for value as an array from URL\n      if (Array.isArray(this.props.selectedValue)) {\n        this.handleDateChange({\n          start: new Date(this.props.selectedValue[0]),\n          end: new Date(this.props.selectedValue[1])\n        }, false);\n      } else {\n        // for value as an object for SSR\n        var _props$selectedValue = this.props.selectedValue,\n            start = _props$selectedValue.start,\n            end = _props$selectedValue.end;\n        this.handleDateChange({\n          start: new Date(start),\n          end: new Date(end)\n        }, false);\n      }\n    } else if (this.props.defaultSelected) {\n      this.handleDateChange(this.props.defaultSelected, false);\n    }\n  };\n\n  DateRange.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n\n    (0, _helper.checkPropChange)(this.props.react, nextProps.react, function () {\n      return _this2.setReact(nextProps);\n    });\n\n    if (!(0, _helper.isEqual)(this.props.defaultSelected, nextProps.defaultSelected)) {\n      this.handleDateChange(nextProps.defaultSelected, false, nextProps);\n    } else {\n      var currentDate = this.state.currentDate;\n      var selectedValue = nextProps.selectedValue; // comparing array format of selectedValue with object form of the state if not null\n\n      if (!(0, _helper.isEqual)(currentDate ? [this.formatInputDate(currentDate.start), this.formatInputDate(currentDate.end)] // prettier-ignore\n      : null, selectedValue) && !(0, _helper.isEqual)(this.props.selectedValue, selectedValue)) {\n        this.handleDateChange(selectedValue ? {\n          start: nextProps.selectedValue[0],\n          end: nextProps.selectedValue[1] // prettier-ignore\n\n        } : null, true, nextProps);\n      }\n    }\n\n    (0, _helper.checkPropChange)(this.props.dataField, nextProps.dataField, function () {\n      return _this2.updateQuery(_this2.state.currentDate ? {\n        // we need the date in correct queryFormat\n        start: (0, _helper.formatDate)(_this2.state.currentDate.start),\n        end: (0, _helper.formatDate)(_this2.state.currentDate.end) // prettier-ignore\n\n      } : _this2.state.currentDate, nextProps);\n    });\n  };\n\n  DateRange.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeComponent(this.props.componentId);\n  };\n\n  DateRange.prototype.setReact = function setReact(props) {\n    if (props.react) {\n      props.watchComponent(props.componentId, props.react);\n    }\n  };\n\n  DateRange.prototype.render = function render() {\n    var _state = this.state,\n        currentDate = _state.currentDate,\n        dateHovered = _state.dateHovered;\n    var start = currentDate ? currentDate.start : '';\n    var end = currentDate ? currentDate.end : '';\n    var endDay = dateHovered || '';\n    var selectedDays = [start, {\n      from: start,\n      to: endDay\n    }];\n    var modifiers = {\n      start: start,\n      end: endDay\n    };\n    return _react2.default.createElement(_DateContainer2.default, {\n      range: true,\n      style: this.props.style,\n      className: this.props.className,\n      showBorder: !this.props.showClear\n    }, this.props.title && _react2.default.createElement(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), _react2.default.createElement(_Flex2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'input-container') || null\n    }, _react2.default.createElement(_Flex2.default, {\n      flex: 2,\n      showBorder: this.props.showClear,\n      iconPosition: 'right',\n      style: {\n        background: this.props.theme.colors.backgroundColor || 'transparent'\n      }\n    }, _react2.default.createElement(_DayPickerInput2.default, _extends({\n      showOverlay: this.props.focused,\n      formatDate: this.formatInputDate,\n      value: start,\n      placeholder: this.props.placeholder.start,\n      dayPickerProps: {\n        numberOfMonths: this.props.numberOfMonths,\n        initialMonth: this.props.initialMonth,\n        disabledDays: {\n          after: this.state.currentDate ? this.state.currentDate.end : ''\n        },\n        selectedDays: selectedDays,\n        modifiers: modifiers\n      },\n      onDayChange: this.handleStartDate,\n      inputProps: {\n        readOnly: true\n      },\n      classNames: {\n        container: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n        overlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n        overlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n      }\n    }, this.props.dayPickerInputProps)), this.props.showClear && this.state.currentDate && this.state.currentDate.start && _react2.default.createElement(_CancelSvg2.default, {\n      onClick: this.clearDayPickerStart\n    })), _react2.default.createElement(_Flex2.default, {\n      justifyContent: 'center',\n      alignItems: 'center',\n      basis: '20px'\n    }, '-'), _react2.default.createElement(_Flex2.default, {\n      flex: 2,\n      showBorder: this.props.showClear,\n      iconPosition: 'right',\n      style: {\n        background: this.props.theme.colors.backgroundColor || 'transparent'\n      }\n    }, _react2.default.createElement(_DayPickerInput2.default, _extends({\n      ref: this.getEndDateRef,\n      showOverlay: this.props.focused,\n      formatDate: this.formatInputDate,\n      value: end,\n      placeholder: this.props.placeholder.end,\n      dayPickerProps: {\n        numberOfMonths: this.props.numberOfMonths,\n        initialMonth: this.props.initialMonth,\n        onDayMouseEnter: this.handleDayMouseEnter,\n        disabledDays: {\n          before: this.state.currentDate ? this.state.currentDate.start : ''\n        },\n        selectedDays: selectedDays,\n        modifiers: modifiers\n      },\n      onDayChange: this.handleEndDate,\n      inputProps: {\n        readOnly: true\n      },\n      classNames: {\n        container: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n        overlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n        overlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n      }\n    }, this.props.dayPickerInputProps)), this.props.showClear && this.state.currentDate && this.state.currentDate.end && _react2.default.createElement(_CancelSvg2.default, {\n      onClick: this.clearDayPickerEnd\n    }))));\n  };\n\n  return DateRange;\n}(_react.Component);\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this3 = this;\n\n  this.formatInputDate = function (date) {\n    var xdate = new _xdate2.default(date);\n    return xdate.valid() ? xdate.toString('yyyy-MM-dd') : '';\n  };\n\n  this.defaultQuery = function (value, props) {\n    var query = null;\n\n    if (value) {\n      if (Array.isArray(props.dataField) && props.dataField.length === 2) {\n        var _range, _range2;\n\n        query = {\n          bool: {\n            must: [{\n              range: (_range = {}, _range[props.dataField[0]] = {\n                lte: (0, _helper.formatDate)(new _xdate2.default(value.start), props)\n              }, _range)\n            }, {\n              range: (_range2 = {}, _range2[props.dataField[1]] = {\n                gte: (0, _helper.formatDate)(new _xdate2.default(value.end), props)\n              }, _range2)\n            }]\n          }\n        };\n      } else if (Array.isArray(props.dataField)) {\n        var _range3;\n\n        query = {\n          range: (_range3 = {}, _range3[props.dataField[0]] = {\n            gte: (0, _helper.formatDate)(new _xdate2.default(value.start), props),\n            lte: (0, _helper.formatDate)(new _xdate2.default(value.end), props)\n          }, _range3)\n        };\n      } else {\n        var _range4;\n\n        query = {\n          range: (_range4 = {}, _range4[props.dataField] = {\n            gte: (0, _helper.formatDate)(new _xdate2.default(value.start), props),\n            lte: (0, _helper.formatDate)(new _xdate2.default(value.end), props)\n          }, _range4)\n        };\n      }\n    }\n\n    return query;\n  };\n\n  this.getEndDateRef = function (ref) {\n    _this3.endDateRef = ref;\n  };\n\n  this.clearDayPickerStart = function () {\n    if (_this3.state.currentDate && _this3.state.currentDate.start !== '') {\n      _this3.handleStartDate('', false); // resets the day picker component\n\n    }\n  };\n\n  this.clearDayPickerEnd = function () {\n    if (_this3.state.currentDate && _this3.state.currentDate.end !== '') {\n      _this3.handleEndDate(''); // resets the day picker component\n\n    }\n  };\n\n  this.handleStartDate = function (date) {\n    var autoFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    var currentDate = _this3.state.currentDate;\n    var end = currentDate ? currentDate.end : '';\n\n    _this3.handleDateChange({\n      start: date,\n      end: end\n    }); // focus the end date DayPicker if its empty\n\n\n    if (_this3.props.autoFocusEnd && autoFocus) {\n      // TODO: replace with a single date component in v2.1.0\n      window.setTimeout(function () {\n        return _this3.endDateRef.getInput().focus();\n      }, 0);\n    }\n  };\n\n  this.handleEndDate = function (date) {\n    var currentDate = _this3.state.currentDate;\n\n    _this3.handleDateChange({\n      start: currentDate ? currentDate.start : '',\n      end: date\n    });\n  };\n\n  this.handleDayMouseEnter = function (day) {\n    _this3.setState({\n      dateHovered: day\n    });\n  };\n\n  this.handleDateChange = function (currentDate) {\n    var isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    var props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this3.props; // ignore state updates when component is locked\n\n    if (props.beforeValueChange && _this3.locked) {\n      return;\n    }\n\n    _this3.locked = true;\n    var value = null;\n\n    if (currentDate && !(currentDate.start === '' && currentDate.end === '')) {\n      value = isDefaultValue ? currentDate : {\n        start: _this3.formatInputDate(currentDate.start),\n        end: _this3.formatInputDate(currentDate.end)\n      }; // prettier-ignore\n    }\n\n    var performUpdate = function performUpdate() {\n      _this3.setState({\n        currentDate: currentDate\n      }, function () {\n        _this3.updateQuery(value, props);\n\n        _this3.locked = false;\n        if (props.onValueChange) props.onValueChange(value);\n      });\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n  };\n\n  this.updateQuery = function (value, props) {\n    if (!value || value && value.start.length && value.end.length) {\n      var query = props.customQuery || _this3.defaultQuery;\n      props.updateQuery({\n        componentId: props.componentId,\n        query: query(value, props),\n        value: value ? [value.start, value.end] : null,\n        showFilter: props.showFilter,\n        label: props.filterLabel,\n        URLParams: props.URLParams,\n        componentType: 'DATERANGE'\n      });\n    }\n  };\n};\n\nDateRange.propTypes = {\n  addComponent: _types2.default.funcRequired,\n  removeComponent: _types2.default.funcRequired,\n  setQueryListener: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  watchComponent: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  // component props\n  autoFocusEnd: _types2.default.bool,\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  dataField: _types2.default.dataFieldArray,\n  dayPickerInputProps: _types2.default.props,\n  defaultSelected: _types2.default.dateObject,\n  filterLabel: _types2.default.string,\n  focused: _types2.default.bool,\n  initialMonth: _types2.default.dateObject,\n  innerClass: _types2.default.style,\n  numberOfMonths: _types2.default.number,\n  onQueryChange: _types2.default.func,\n  placeholder: _types2.default.rangeLabels,\n  queryFormat: _types2.default.queryFormatDate,\n  react: _types2.default.react,\n  showClear: _types2.default.bool,\n  showFilter: _types2.default.bool,\n  style: _types2.default.style,\n  theme: _types2.default.style,\n  title: _types2.default.string\n};\nDateRange.defaultProps = {\n  autoFocusEnd: true,\n  numberOfMonths: 2,\n  placeholder: {\n    start: 'Start date',\n    end: 'End date'\n  },\n  showClear: true,\n  showFilter: true\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    addComponent: function addComponent(component) {\n      return dispatch((0, _actions.addComponent)(component));\n    },\n    removeComponent: function removeComponent(component) {\n      return dispatch((0, _actions.removeComponent)(component));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    watchComponent: function watchComponent(component, react) {\n      return dispatch((0, _actions.watchComponent)(component, react));\n    },\n    setQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n      return dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n    }\n  };\n};\n\nexports.default = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(DateRange));","map":{"version":3,"sources":["C:/Users/porto/info340-code/pod/340/node_modules/@appbaseio/reactivesearch/lib/components/date/DateRange.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","require","_react2","_interopRequireDefault","_actions","_helper","_types","_types2","_xdate","_xdate2","_DayPickerInput","_DayPickerInput2","_emotionTheming","_DateContainer","_DateContainer2","_Title","_Title2","_Flex","_Flex2","_utils","_CancelSvg","_CancelSvg2","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","DateRange","_Component","props","_this","_initialiseProps","state","currentDate","dateHovered","locked","setQueryListener","componentId","onQueryChange","componentWillMount","addComponent","setReact","selectedValue","Array","isArray","handleDateChange","start","Date","end","_props$selectedValue","defaultSelected","componentWillReceiveProps","nextProps","_this2","checkPropChange","react","isEqual","formatInputDate","dataField","updateQuery","formatDate","componentWillUnmount","removeComponent","watchComponent","render","_state","endDay","selectedDays","from","to","modifiers","createElement","range","style","className","showBorder","showClear","title","getClassName","innerClass","flex","iconPosition","background","theme","colors","backgroundColor","showOverlay","focused","placeholder","dayPickerProps","numberOfMonths","initialMonth","disabledDays","after","onDayChange","handleStartDate","inputProps","readOnly","classNames","container","overlayWrapper","overlay","dayPickerInputProps","onClick","clearDayPickerStart","justifyContent","alignItems","basis","ref","getEndDateRef","onDayMouseEnter","handleDayMouseEnter","before","handleEndDate","clearDayPickerEnd","Component","_this3","date","xdate","valid","toString","defaultQuery","query","_range","_range2","bool","must","lte","gte","_range3","_range4","endDateRef","autoFocus","undefined","autoFocusEnd","window","setTimeout","getInput","focus","day","setState","isDefaultValue","beforeValueChange","performUpdate","onValueChange","checkValueChange","customQuery","showFilter","label","filterLabel","URLParams","componentType","propTypes","funcRequired","string","stringRequired","dataFieldArray","dateObject","number","func","rangeLabels","queryFormat","queryFormatDate","defaultProps","mapStateToProps","selectedValues","mapDispatchtoProps","dispatch","component","updateQueryObject","beforeQueryChange","connect","withTheme"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _xdate = require('xdate');\n\nvar _xdate2 = _interopRequireDefault(_xdate);\n\nvar _DayPickerInput = require('react-day-picker/DayPickerInput');\n\nvar _DayPickerInput2 = _interopRequireDefault(_DayPickerInput);\n\nvar _emotionTheming = require('emotion-theming');\n\nvar _DateContainer = require('../../styles/DateContainer');\n\nvar _DateContainer2 = _interopRequireDefault(_DateContainer);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Flex = require('../../styles/Flex');\n\nvar _Flex2 = _interopRequireDefault(_Flex);\n\nvar _utils = require('../../utils');\n\nvar _CancelSvg = require('../shared/CancelSvg');\n\nvar _CancelSvg2 = _interopRequireDefault(_CancelSvg);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DateRange = function (_Component) {\n\t_inherits(DateRange, _Component);\n\n\tfunction DateRange(props) {\n\t\t_classCallCheck(this, DateRange);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\t_this.state = {\n\t\t\tcurrentDate: null,\n\t\t\tdateHovered: null\n\t\t};\n\t\t_this.locked = false;\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\t\treturn _this;\n\t}\n\n\tDateRange.prototype.componentWillMount = function componentWillMount() {\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.setReact(this.props);\n\n\t\tif (this.props.selectedValue) {\n\t\t\t// parsing string values from selectedValue to date objects for DayPicker\n\t\t\t// for value as an array from URL\n\t\t\tif (Array.isArray(this.props.selectedValue)) {\n\t\t\t\tthis.handleDateChange({\n\t\t\t\t\tstart: new Date(this.props.selectedValue[0]),\n\t\t\t\t\tend: new Date(this.props.selectedValue[1])\n\t\t\t\t}, false);\n\t\t\t} else {\n\t\t\t\t// for value as an object for SSR\n\t\t\t\tvar _props$selectedValue = this.props.selectedValue,\n\t\t\t\t    start = _props$selectedValue.start,\n\t\t\t\t    end = _props$selectedValue.end;\n\n\t\t\t\tthis.handleDateChange({\n\t\t\t\t\tstart: new Date(start),\n\t\t\t\t\tend: new Date(end)\n\t\t\t\t}, false);\n\t\t\t}\n\t\t} else if (this.props.defaultSelected) {\n\t\t\tthis.handleDateChange(this.props.defaultSelected, false);\n\t\t}\n\t};\n\n\tDateRange.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkPropChange)(this.props.react, nextProps.react, function () {\n\t\t\treturn _this2.setReact(nextProps);\n\t\t});\n\t\tif (!(0, _helper.isEqual)(this.props.defaultSelected, nextProps.defaultSelected)) {\n\t\t\tthis.handleDateChange(nextProps.defaultSelected, false, nextProps);\n\t\t} else {\n\t\t\tvar currentDate = this.state.currentDate;\n\t\t\tvar selectedValue = nextProps.selectedValue;\n\t\t\t// comparing array format of selectedValue with object form of the state if not null\n\n\t\t\tif (!(0, _helper.isEqual)(currentDate ? [this.formatInputDate(currentDate.start), this.formatInputDate(currentDate.end)] // prettier-ignore\n\t\t\t: null, selectedValue) && !(0, _helper.isEqual)(this.props.selectedValue, selectedValue)) {\n\t\t\t\tthis.handleDateChange(selectedValue ? {\n\t\t\t\t\tstart: nextProps.selectedValue[0],\n\t\t\t\t\tend: nextProps.selectedValue[1] // prettier-ignore\n\t\t\t\t} : null, true, nextProps);\n\t\t\t}\n\t\t}\n\t\t(0, _helper.checkPropChange)(this.props.dataField, nextProps.dataField, function () {\n\t\t\treturn _this2.updateQuery(_this2.state.currentDate ? {\n\t\t\t\t// we need the date in correct queryFormat\n\t\t\t\tstart: (0, _helper.formatDate)(_this2.state.currentDate.start),\n\t\t\t\tend: (0, _helper.formatDate)(_this2.state.currentDate.end) // prettier-ignore\n\t\t\t} : _this2.state.currentDate, nextProps);\n\t\t});\n\t};\n\n\tDateRange.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t};\n\n\tDateRange.prototype.setReact = function setReact(props) {\n\t\tif (props.react) {\n\t\t\tprops.watchComponent(props.componentId, props.react);\n\t\t}\n\t};\n\n\tDateRange.prototype.render = function render() {\n\t\tvar _state = this.state,\n\t\t    currentDate = _state.currentDate,\n\t\t    dateHovered = _state.dateHovered;\n\n\t\tvar start = currentDate ? currentDate.start : '';\n\t\tvar end = currentDate ? currentDate.end : '';\n\t\tvar endDay = dateHovered || '';\n\t\tvar selectedDays = [start, { from: start, to: endDay }];\n\t\tvar modifiers = { start: start, end: endDay };\n\t\treturn _react2.default.createElement(\n\t\t\t_DateContainer2.default,\n\t\t\t{\n\t\t\t\trange: true,\n\t\t\t\tstyle: this.props.style,\n\t\t\t\tclassName: this.props.className,\n\t\t\t\tshowBorder: !this.props.showClear\n\t\t\t},\n\t\t\tthis.props.title && _react2.default.createElement(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\t_react2.default.createElement(\n\t\t\t\t_Flex2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'input-container') || null },\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\tflex: 2,\n\t\t\t\t\t\tshowBorder: this.props.showClear,\n\t\t\t\t\t\ticonPosition: 'right',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackground: this.props.theme.colors.backgroundColor || 'transparent'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_react2.default.createElement(_DayPickerInput2.default, _extends({\n\t\t\t\t\t\tshowOverlay: this.props.focused,\n\t\t\t\t\t\tformatDate: this.formatInputDate,\n\t\t\t\t\t\tvalue: start,\n\t\t\t\t\t\tplaceholder: this.props.placeholder.start,\n\t\t\t\t\t\tdayPickerProps: {\n\t\t\t\t\t\t\tnumberOfMonths: this.props.numberOfMonths,\n\t\t\t\t\t\t\tinitialMonth: this.props.initialMonth,\n\t\t\t\t\t\t\tdisabledDays: {\n\t\t\t\t\t\t\t\tafter: this.state.currentDate ? this.state.currentDate.end : ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tselectedDays: selectedDays,\n\t\t\t\t\t\t\tmodifiers: modifiers\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDayChange: this.handleStartDate,\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\treadOnly: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclassNames: {\n\t\t\t\t\t\t\tcontainer: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n\t\t\t\t\t\t\toverlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n\t\t\t\t\t\t\toverlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this.props.dayPickerInputProps)),\n\t\t\t\t\tthis.props.showClear && this.state.currentDate && this.state.currentDate.start && _react2.default.createElement(_CancelSvg2.default, { onClick: this.clearDayPickerStart })\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{ justifyContent: 'center', alignItems: 'center', basis: '20px' },\n\t\t\t\t\t'-'\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_Flex2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\tflex: 2,\n\t\t\t\t\t\tshowBorder: this.props.showClear,\n\t\t\t\t\t\ticonPosition: 'right',\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tbackground: this.props.theme.colors.backgroundColor || 'transparent'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t_react2.default.createElement(_DayPickerInput2.default, _extends({\n\t\t\t\t\t\tref: this.getEndDateRef,\n\t\t\t\t\t\tshowOverlay: this.props.focused,\n\t\t\t\t\t\tformatDate: this.formatInputDate,\n\t\t\t\t\t\tvalue: end,\n\t\t\t\t\t\tplaceholder: this.props.placeholder.end,\n\t\t\t\t\t\tdayPickerProps: {\n\t\t\t\t\t\t\tnumberOfMonths: this.props.numberOfMonths,\n\t\t\t\t\t\t\tinitialMonth: this.props.initialMonth,\n\t\t\t\t\t\t\tonDayMouseEnter: this.handleDayMouseEnter,\n\t\t\t\t\t\t\tdisabledDays: {\n\t\t\t\t\t\t\t\tbefore: this.state.currentDate ? this.state.currentDate.start : ''\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tselectedDays: selectedDays,\n\t\t\t\t\t\t\tmodifiers: modifiers\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDayChange: this.handleEndDate,\n\t\t\t\t\t\tinputProps: {\n\t\t\t\t\t\t\treadOnly: true\n\t\t\t\t\t\t},\n\t\t\t\t\t\tclassNames: {\n\t\t\t\t\t\t\tcontainer: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-container') || 'DayPickerInput',\n\t\t\t\t\t\t\toverlayWrapper: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay-wrapper') || 'DayPickerInput-OverlayWrapper',\n\t\t\t\t\t\t\toverlay: (0, _helper.getClassName)(this.props.innerClass, 'daypicker-overlay') || 'DayPickerInput-Overlay'\n\t\t\t\t\t\t}\n\t\t\t\t\t}, this.props.dayPickerInputProps)),\n\t\t\t\t\tthis.props.showClear && this.state.currentDate && this.state.currentDate.end && _react2.default.createElement(_CancelSvg2.default, { onClick: this.clearDayPickerEnd })\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\treturn DateRange;\n}(_react.Component);\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this3 = this;\n\n\tthis.formatInputDate = function (date) {\n\t\tvar xdate = new _xdate2.default(date);\n\t\treturn xdate.valid() ? xdate.toString('yyyy-MM-dd') : '';\n\t};\n\n\tthis.defaultQuery = function (value, props) {\n\t\tvar query = null;\n\t\tif (value) {\n\t\t\tif (Array.isArray(props.dataField) && props.dataField.length === 2) {\n\t\t\t\tvar _range, _range2;\n\n\t\t\t\tquery = {\n\t\t\t\t\tbool: {\n\t\t\t\t\t\tmust: [{\n\t\t\t\t\t\t\trange: (_range = {}, _range[props.dataField[0]] = {\n\t\t\t\t\t\t\t\tlte: (0, _helper.formatDate)(new _xdate2.default(value.start), props)\n\t\t\t\t\t\t\t}, _range)\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\trange: (_range2 = {}, _range2[props.dataField[1]] = {\n\t\t\t\t\t\t\t\tgte: (0, _helper.formatDate)(new _xdate2.default(value.end), props)\n\t\t\t\t\t\t\t}, _range2)\n\t\t\t\t\t\t}]\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t} else if (Array.isArray(props.dataField)) {\n\t\t\t\tvar _range3;\n\n\t\t\t\tquery = {\n\t\t\t\t\trange: (_range3 = {}, _range3[props.dataField[0]] = {\n\t\t\t\t\t\tgte: (0, _helper.formatDate)(new _xdate2.default(value.start), props),\n\t\t\t\t\t\tlte: (0, _helper.formatDate)(new _xdate2.default(value.end), props)\n\t\t\t\t\t}, _range3)\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tvar _range4;\n\n\t\t\t\tquery = {\n\t\t\t\t\trange: (_range4 = {}, _range4[props.dataField] = {\n\t\t\t\t\t\tgte: (0, _helper.formatDate)(new _xdate2.default(value.start), props),\n\t\t\t\t\t\tlte: (0, _helper.formatDate)(new _xdate2.default(value.end), props)\n\t\t\t\t\t}, _range4)\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn query;\n\t};\n\n\tthis.getEndDateRef = function (ref) {\n\t\t_this3.endDateRef = ref;\n\t};\n\n\tthis.clearDayPickerStart = function () {\n\t\tif (_this3.state.currentDate && _this3.state.currentDate.start !== '') {\n\t\t\t_this3.handleStartDate('', false); // resets the day picker component\n\t\t}\n\t};\n\n\tthis.clearDayPickerEnd = function () {\n\t\tif (_this3.state.currentDate && _this3.state.currentDate.end !== '') {\n\t\t\t_this3.handleEndDate(''); // resets the day picker component\n\t\t}\n\t};\n\n\tthis.handleStartDate = function (date) {\n\t\tvar autoFocus = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\t\tvar currentDate = _this3.state.currentDate;\n\n\t\tvar end = currentDate ? currentDate.end : '';\n\t\t_this3.handleDateChange({\n\t\t\tstart: date,\n\t\t\tend: end\n\t\t});\n\t\t// focus the end date DayPicker if its empty\n\t\tif (_this3.props.autoFocusEnd && autoFocus) {\n\t\t\t// TODO: replace with a single date component in v2.1.0\n\t\t\twindow.setTimeout(function () {\n\t\t\t\treturn _this3.endDateRef.getInput().focus();\n\t\t\t}, 0);\n\t\t}\n\t};\n\n\tthis.handleEndDate = function (date) {\n\t\tvar currentDate = _this3.state.currentDate;\n\n\t\t_this3.handleDateChange({\n\t\t\tstart: currentDate ? currentDate.start : '',\n\t\t\tend: date\n\t\t});\n\t};\n\n\tthis.handleDayMouseEnter = function (day) {\n\t\t_this3.setState({\n\t\t\tdateHovered: day\n\t\t});\n\t};\n\n\tthis.handleDateChange = function (currentDate) {\n\t\tvar isDefaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\tvar props = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this3.props;\n\n\t\t// ignore state updates when component is locked\n\t\tif (props.beforeValueChange && _this3.locked) {\n\t\t\treturn;\n\t\t}\n\n\t\t_this3.locked = true;\n\t\tvar value = null;\n\t\tif (currentDate && !(currentDate.start === '' && currentDate.end === '')) {\n\t\t\tvalue = isDefaultValue ? currentDate : {\n\t\t\t\tstart: _this3.formatInputDate(currentDate.start),\n\t\t\t\tend: _this3.formatInputDate(currentDate.end)\n\t\t\t}; // prettier-ignore\n\t\t}\n\n\t\tvar performUpdate = function performUpdate() {\n\t\t\t_this3.setState({\n\t\t\t\tcurrentDate: currentDate\n\t\t\t}, function () {\n\t\t\t\t_this3.updateQuery(value, props);\n\t\t\t\t_this3.locked = false;\n\t\t\t\tif (props.onValueChange) props.onValueChange(value);\n\t\t\t});\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, value, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tif (!value || value && value.start.length && value.end.length) {\n\t\t\tvar query = props.customQuery || _this3.defaultQuery;\n\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: props.componentId,\n\t\t\t\tquery: query(value, props),\n\t\t\t\tvalue: value ? [value.start, value.end] : null,\n\t\t\t\tshowFilter: props.showFilter,\n\t\t\t\tlabel: props.filterLabel,\n\t\t\t\tURLParams: props.URLParams,\n\t\t\t\tcomponentType: 'DATERANGE'\n\t\t\t});\n\t\t}\n\t};\n};\n\nDateRange.propTypes = {\n\taddComponent: _types2.default.funcRequired,\n\tremoveComponent: _types2.default.funcRequired,\n\tsetQueryListener: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\twatchComponent: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\t// component props\n\tautoFocusEnd: _types2.default.bool,\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tdataField: _types2.default.dataFieldArray,\n\tdayPickerInputProps: _types2.default.props,\n\tdefaultSelected: _types2.default.dateObject,\n\tfilterLabel: _types2.default.string,\n\tfocused: _types2.default.bool,\n\tinitialMonth: _types2.default.dateObject,\n\tinnerClass: _types2.default.style,\n\tnumberOfMonths: _types2.default.number,\n\tonQueryChange: _types2.default.func,\n\tplaceholder: _types2.default.rangeLabels,\n\tqueryFormat: _types2.default.queryFormatDate,\n\treact: _types2.default.react,\n\tshowClear: _types2.default.bool,\n\tshowFilter: _types2.default.bool,\n\tstyle: _types2.default.style,\n\ttheme: _types2.default.style,\n\ttitle: _types2.default.string\n};\n\nDateRange.defaultProps = {\n\tautoFocusEnd: true,\n\tnumberOfMonths: 2,\n\tplaceholder: {\n\t\tstart: 'Start date',\n\t\tend: 'End date'\n\t},\n\tshowClear: true,\n\tshowFilter: true\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\taddComponent: function addComponent(component) {\n\t\t\treturn dispatch((0, _actions.addComponent)(component));\n\t\t},\n\t\tremoveComponent: function removeComponent(component) {\n\t\t\treturn dispatch((0, _actions.removeComponent)(component));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\twatchComponent: function watchComponent(component, react) {\n\t\t\treturn dispatch((0, _actions.watchComponent)(component, react));\n\t\t},\n\t\tsetQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n\t\t\treturn dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n\t\t}\n\t};\n};\n\nexports.default = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)((0, _emotionTheming.withTheme)(DateRange));"]},"metadata":{},"sourceType":"script"}