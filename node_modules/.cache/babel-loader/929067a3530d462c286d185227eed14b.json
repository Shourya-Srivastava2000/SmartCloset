{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Slider = require('rheostat/lib/Slider');\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _HistogramContainer = require('./addons/HistogramContainer');\n\nvar _HistogramContainer2 = _interopRequireDefault(_HistogramContainer);\n\nvar _RangeLabel = require('./addons/RangeLabel');\n\nvar _RangeLabel2 = _interopRequireDefault(_RangeLabel);\n\nvar _SliderHandle = require('./addons/SliderHandle');\n\nvar _SliderHandle2 = _interopRequireDefault(_SliderHandle);\n\nvar _Slider3 = require('../../styles/Slider');\n\nvar _Slider4 = _interopRequireDefault(_Slider3);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Label = require('../../styles/Label');\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar RangeSlider = function (_Component) {\n  _inherits(RangeSlider, _Component);\n\n  function RangeSlider(props) {\n    _classCallCheck(this, RangeSlider);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _initialiseProps.call(_this);\n\n    _this.state = {\n      currentValue: [props.range.start, props.range.end],\n      stats: []\n    };\n    _this.locked = false;\n    _this.internalComponent = _this.props.componentId + '__internal';\n    props.setQueryListener(props.componentId, props.onQueryChange, null);\n    return _this;\n  }\n\n  RangeSlider.prototype.componentWillMount = function componentWillMount() {\n    this.props.addComponent(this.props.componentId);\n    this.props.addComponent(this.internalComponent);\n    this.updateQueryOptions(this.props);\n    this.setReact(this.props);\n    var _props = this.props,\n        selectedValue = _props.selectedValue,\n        defaultSelected = _props.defaultSelected;\n\n    if (Array.isArray(selectedValue)) {\n      this.handleChange(selectedValue);\n    } else if (selectedValue) {\n      // for value as an object for SSR\n      this.handleChange(RangeSlider.parseValue(selectedValue, this.props));\n    } else if (defaultSelected) {\n      this.handleChange(RangeSlider.parseValue(defaultSelected, this.props));\n    }\n  };\n\n  RangeSlider.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    var _this2 = this;\n\n    (0, _helper.checkPropChange)(this.props.react, nextProps.react, function () {\n      return _this2.setReact(nextProps);\n    });\n    (0, _helper.checkSomePropChange)(this.props, nextProps, ['showHistogram', 'interval'], function () {\n      return _this2.updateQueryOptions(nextProps);\n    });\n    (0, _helper.checkPropChange)(this.props.options, nextProps.options, function () {\n      var options = nextProps.options;\n\n      if (Array.isArray(options)) {\n        options.sort(function (a, b) {\n          if (a.key < b.key) return -1;\n          if (a.key > b.key) return 1;\n          return 0;\n        });\n      }\n\n      _this2.setState({\n        stats: options || []\n      });\n    });\n    (0, _helper.checkPropChange)(this.props.dataField, nextProps.dataField, function () {\n      _this2.updateQueryOptions(nextProps);\n\n      _this2.handleChange(_this2.state.currentValue, nextProps);\n    });\n\n    if (!(0, _helper.isEqual)(this.props.defaultSelected, nextProps.defaultSelected)) {\n      this.handleChange([nextProps.defaultSelected.start, nextProps.defaultSelected.end], nextProps);\n    } else if (!(0, _helper.isEqual)(this.state.currentValue, nextProps.selectedValue)) {\n      this.handleChange(nextProps.selectedValue || [nextProps.range.start, nextProps.range.end]);\n    }\n  };\n\n  RangeSlider.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n    var upperLimit = Math.floor((nextProps.range.end - nextProps.range.start) / 2);\n\n    if (nextProps.stepValue < 1 || nextProps.stepValue > upperLimit) {\n      console.warn('stepValue for RangeSlider ' + nextProps.componentId + ' should be greater than 0 and less than or equal to ' + upperLimit);\n      return false;\n    }\n\n    return true;\n  };\n\n  RangeSlider.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeComponent(this.props.componentId);\n    this.props.removeComponent(this.internalComponent);\n  };\n\n  RangeSlider.prototype.render = function render() {\n    var _this3 = this;\n\n    return _react2.default.createElement(_Slider4.default, {\n      primary: true,\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.title && _react2.default.createElement(_Title2.default, {\n      className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null\n    }, this.props.title), this.state.stats.length && this.props.showHistogram && this.props.showSlider ? _react2.default.createElement(_HistogramContainer2.default, {\n      stats: this.state.stats,\n      range: this.props.range,\n      interval: this.getValidInterval(this.props)\n    }) : null, this.props.showSlider && _react2.default.createElement(_Slider2.default, {\n      min: this.props.range.start,\n      max: this.props.range.end,\n      values: this.state.currentValue,\n      onChange: this.handleSlider,\n      onValuesUpdated: this.handleDrag,\n      snap: this.props.snap,\n      snapPoints: this.props.snap ? this.getSnapPoints() : null,\n      className: (0, _helper.getClassName)(this.props.innerClass, 'slider'),\n      handle: function handle(_ref) {\n        var className = _ref.className,\n            style = _ref.style,\n            passProps = _objectWithoutProperties(_ref, ['className', 'style']);\n\n        return _react2.default.createElement(_SliderHandle2.default, _extends({\n          style: style,\n          className: className\n        }, passProps, {\n          renderTooltipData: _this3.props.renderTooltipData,\n          tooltipTrigger: _this3.props.tooltipTrigger\n        }));\n      }\n    }), this.props.rangeLabels && this.props.showSlider && _react2.default.createElement('div', {\n      className: _Label.rangeLabelsContainer\n    }, _react2.default.createElement(_RangeLabel2.default, {\n      align: 'left',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n    }, this.props.rangeLabels.start), _react2.default.createElement(_RangeLabel2.default, {\n      align: 'right',\n      className: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n    }, this.props.rangeLabels.end)));\n  };\n\n  return RangeSlider;\n}(_react.Component);\n\nRangeSlider.parseValue = function (value, props) {\n  return value ? [value.start, value.end] : [props.range.start, props.range.end];\n};\n\nRangeSlider.defaultQuery = function (value, props) {\n  if (Array.isArray(value) && value.length) {\n    var _range;\n\n    return {\n      range: (_range = {}, _range[props.dataField] = {\n        gte: value[0],\n        lte: value[1],\n        boost: 2.0\n      }, _range)\n    };\n  }\n\n  return null;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n  var _this4 = this;\n\n  this.setReact = function (props) {\n    var react = props.react;\n\n    if (react) {\n      var newReact = (0, _helper.pushToAndClause)(react, _this4.internalComponent);\n      props.watchComponent(props.componentId, newReact);\n    } else {\n      props.watchComponent(props.componentId, {\n        and: _this4.internalComponent\n      });\n    }\n  };\n\n  this.getSnapPoints = function () {\n    var snapPoints = [];\n    var stepValue = _this4.props.stepValue; // limit the number of steps to prevent generating a large number of snapPoints\n\n    if ((_this4.props.range.end - _this4.props.range.start) / stepValue > 100) {\n      stepValue = (_this4.props.range.end - _this4.props.range.start) / 100;\n    }\n\n    for (var i = _this4.props.range.start; i <= _this4.props.range.end; i += stepValue) {\n      snapPoints = snapPoints.concat(i);\n    }\n\n    if (snapPoints[snapPoints.length - 1] !== _this4.props.range.end) {\n      snapPoints = snapPoints.concat(_this4.props.range.end);\n    }\n\n    return snapPoints;\n  };\n\n  this.getValidInterval = function (props) {\n    var min = Math.ceil((props.range.end - props.range.start) / 100) || 1;\n\n    if (!props.interval) {\n      return min;\n    } else if (props.interval < min) {\n      console.error(props.componentId + ': interval prop\\'s value should be greater than or equal to ' + min);\n      return min;\n    }\n\n    return props.interval;\n  };\n\n  this.histogramQuery = function (props) {\n    var _ref2;\n\n    return _ref2 = {}, _ref2[props.dataField] = {\n      histogram: {\n        field: props.dataField,\n        interval: _this4.getValidInterval(props),\n        offset: props.range.start\n      }\n    }, _ref2;\n  };\n\n  this.handleChange = function (currentValue) {\n    var props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this4.props; // ignore state updates when component is locked\n\n    if (props.beforeValueChange && _this4.locked) {\n      return;\n    }\n\n    _this4.locked = true;\n\n    var performUpdate = function performUpdate() {\n      _this4.setState({\n        currentValue: currentValue\n      }, function () {\n        _this4.updateQuery([currentValue[0], currentValue[1]], props);\n\n        _this4.locked = false;\n\n        if (props.onValueChange) {\n          props.onValueChange({\n            start: currentValue[0],\n            end: currentValue[1]\n          });\n        }\n      });\n    };\n\n    (0, _helper.checkValueChange)(props.componentId, {\n      start: currentValue[0],\n      end: currentValue[1]\n    }, props.beforeValueChange, performUpdate);\n  };\n\n  this.handleSlider = function (_ref3) {\n    var values = _ref3.values;\n\n    if (!(0, _helper.isEqual)(values, _this4.state.currentValue)) {\n      _this4.handleChange(values);\n    }\n  };\n\n  this.handleDrag = function (values) {\n    if (_this4.props.onDrag) {\n      var min = values.min,\n          max = values.max,\n          currentValue = values.values;\n\n      _this4.props.onDrag(currentValue, [min, max]);\n    }\n  };\n\n  this.updateQuery = function (value, props) {\n    var query = props.customQuery || RangeSlider.defaultQuery;\n    var showFilter = props.showFilter,\n        _props$range = props.range,\n        start = _props$range.start,\n        end = _props$range.end;\n    var currentStart = value[0],\n        currentEnd = value[1]; // check if the slider is at its initial position\n\n    var isInitialValue = currentStart === start && currentEnd === end;\n    props.updateQuery({\n      componentId: props.componentId,\n      query: query(value, props),\n      value: value,\n      label: props.filterLabel,\n      showFilter: showFilter && !isInitialValue,\n      URLParams: props.URLParams,\n      componentType: 'RANGESLIDER'\n    });\n  };\n\n  this.updateQueryOptions = function (props) {\n    if (props.showHistogram) {\n      var queryOptions = {\n        size: 0,\n        aggs: (props.histogramQuery || _this4.histogramQuery)(props)\n      };\n      props.setQueryOptions(_this4.internalComponent, queryOptions, false);\n      var query = props.customQuery || RangeSlider.defaultQuery;\n      props.updateQuery({\n        componentId: _this4.internalComponent,\n        query: query([props.range.start, props.range.end], props)\n      });\n    }\n  };\n};\n\nRangeSlider.propTypes = {\n  addComponent: _types2.default.funcRequired,\n  removeComponent: _types2.default.funcRequired,\n  setQueryListener: _types2.default.funcRequired,\n  setQueryOptions: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  watchComponent: _types2.default.funcRequired,\n  options: _types2.default.options,\n  selectedValue: _types2.default.selectedValue,\n  // component props\n  beforeValueChange: _types2.default.func,\n  className: _types2.default.string,\n  componentId: _types2.default.stringRequired,\n  customQuery: _types2.default.func,\n  dataField: _types2.default.stringRequired,\n  defaultSelected: _types2.default.range,\n  filterLabel: _types2.default.string,\n  innerClass: _types2.default.style,\n  interval: _types2.default.number,\n  onDrag: _types2.default.func,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  range: _types2.default.range,\n  rangeLabels: _types2.default.rangeLabels,\n  react: _types2.default.react,\n  showHistogram: _types2.default.bool,\n  histogramQuery: _types2.default.func,\n  showFilter: _types2.default.bool,\n  showSlider: _types2.default.bool,\n  tooltipTrigger: _types2.default.tooltipTrigger,\n  renderTooltipData: _types2.default.func,\n  snap: _types2.default.bool,\n  stepValue: _types2.default.number,\n  style: _types2.default.style,\n  title: _types2.default.title,\n  URLParams: _types2.default.bool\n};\nRangeSlider.defaultProps = {\n  className: null,\n  range: {\n    start: 0,\n    end: 10\n  },\n  showHistogram: true,\n  showSlider: true,\n  tooltipTrigger: 'none',\n  snap: true,\n  stepValue: 1,\n  showFilter: true,\n  style: {},\n  URLParams: false\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    options: state.aggregations[props.componentId] ? state.aggregations[props.componentId][props.dataField] && state.aggregations[props.componentId][props.dataField].buckets // eslint-disable-line\n    : [],\n    selectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    addComponent: function addComponent(component) {\n      return dispatch((0, _actions.addComponent)(component));\n    },\n    removeComponent: function removeComponent(component) {\n      return dispatch((0, _actions.removeComponent)(component));\n    },\n    setQueryOptions: function setQueryOptions(component, props, execute) {\n      return dispatch((0, _actions.setQueryOptions)(component, props, execute));\n    },\n    setQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n      return dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    watchComponent: function watchComponent(component, react) {\n      return dispatch((0, _actions.watchComponent)(component, react));\n    }\n  };\n};\n\nexports.default = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(RangeSlider);","map":{"version":3,"sources":["C:/Users/porto/info340-code/pod/340/node_modules/@appbaseio/reactivesearch/lib/components/range/RangeSlider.js"],"names":["exports","__esModule","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_react","require","_react2","_interopRequireDefault","_actions","_helper","_types","_types2","_Slider","_Slider2","_HistogramContainer","_HistogramContainer2","_RangeLabel","_RangeLabel2","_SliderHandle","_SliderHandle2","_Slider3","_Slider4","_Title","_Title2","_Label","_utils","obj","default","_objectWithoutProperties","keys","indexOf","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","RangeSlider","_Component","props","_this","_initialiseProps","state","currentValue","range","start","end","stats","locked","internalComponent","componentId","setQueryListener","onQueryChange","componentWillMount","addComponent","updateQueryOptions","setReact","_props","selectedValue","defaultSelected","Array","isArray","handleChange","parseValue","componentWillReceiveProps","nextProps","_this2","checkPropChange","react","checkSomePropChange","options","sort","a","b","setState","dataField","isEqual","shouldComponentUpdate","upperLimit","Math","floor","stepValue","console","warn","componentWillUnmount","removeComponent","render","_this3","createElement","primary","style","className","title","getClassName","innerClass","showHistogram","showSlider","interval","getValidInterval","min","max","values","onChange","handleSlider","onValuesUpdated","handleDrag","snap","snapPoints","getSnapPoints","handle","_ref","passProps","renderTooltipData","tooltipTrigger","rangeLabels","rangeLabelsContainer","align","Component","defaultQuery","_range","gte","lte","boost","_this4","newReact","pushToAndClause","watchComponent","and","concat","ceil","error","histogramQuery","_ref2","histogram","field","offset","undefined","beforeValueChange","performUpdate","updateQuery","onValueChange","checkValueChange","_ref3","onDrag","query","customQuery","showFilter","_props$range","currentStart","currentEnd","isInitialValue","label","filterLabel","URLParams","componentType","queryOptions","size","aggs","setQueryOptions","propTypes","funcRequired","func","string","stringRequired","number","bool","defaultProps","mapStateToProps","aggregations","buckets","selectedValues","mapDispatchtoProps","dispatch","component","execute","beforeQueryChange","updateQueryObject","connect"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Slider = require('rheostat/lib/Slider');\n\nvar _Slider2 = _interopRequireDefault(_Slider);\n\nvar _HistogramContainer = require('./addons/HistogramContainer');\n\nvar _HistogramContainer2 = _interopRequireDefault(_HistogramContainer);\n\nvar _RangeLabel = require('./addons/RangeLabel');\n\nvar _RangeLabel2 = _interopRequireDefault(_RangeLabel);\n\nvar _SliderHandle = require('./addons/SliderHandle');\n\nvar _SliderHandle2 = _interopRequireDefault(_SliderHandle);\n\nvar _Slider3 = require('../../styles/Slider');\n\nvar _Slider4 = _interopRequireDefault(_Slider3);\n\nvar _Title = require('../../styles/Title');\n\nvar _Title2 = _interopRequireDefault(_Title);\n\nvar _Label = require('../../styles/Label');\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar RangeSlider = function (_Component) {\n\t_inherits(RangeSlider, _Component);\n\n\tfunction RangeSlider(props) {\n\t\t_classCallCheck(this, RangeSlider);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n\t\t_initialiseProps.call(_this);\n\n\t\t_this.state = {\n\t\t\tcurrentValue: [props.range.start, props.range.end],\n\t\t\tstats: []\n\t\t};\n\n\t\t_this.locked = false;\n\t\t_this.internalComponent = _this.props.componentId + '__internal';\n\t\tprops.setQueryListener(props.componentId, props.onQueryChange, null);\n\t\treturn _this;\n\t}\n\n\tRangeSlider.prototype.componentWillMount = function componentWillMount() {\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.props.addComponent(this.internalComponent);\n\n\t\tthis.updateQueryOptions(this.props);\n\t\tthis.setReact(this.props);\n\n\t\tvar _props = this.props,\n\t\t    selectedValue = _props.selectedValue,\n\t\t    defaultSelected = _props.defaultSelected;\n\n\t\tif (Array.isArray(selectedValue)) {\n\t\t\tthis.handleChange(selectedValue);\n\t\t} else if (selectedValue) {\n\t\t\t// for value as an object for SSR\n\t\t\tthis.handleChange(RangeSlider.parseValue(selectedValue, this.props));\n\t\t} else if (defaultSelected) {\n\t\t\tthis.handleChange(RangeSlider.parseValue(defaultSelected, this.props));\n\t\t}\n\t};\n\n\tRangeSlider.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n\t\tvar _this2 = this;\n\n\t\t(0, _helper.checkPropChange)(this.props.react, nextProps.react, function () {\n\t\t\treturn _this2.setReact(nextProps);\n\t\t});\n\t\t(0, _helper.checkSomePropChange)(this.props, nextProps, ['showHistogram', 'interval'], function () {\n\t\t\treturn _this2.updateQueryOptions(nextProps);\n\t\t});\n\t\t(0, _helper.checkPropChange)(this.props.options, nextProps.options, function () {\n\t\t\tvar options = nextProps.options;\n\n\t\t\tif (Array.isArray(options)) {\n\t\t\t\toptions.sort(function (a, b) {\n\t\t\t\t\tif (a.key < b.key) return -1;\n\t\t\t\t\tif (a.key > b.key) return 1;\n\t\t\t\t\treturn 0;\n\t\t\t\t});\n\t\t\t}\n\t\t\t_this2.setState({\n\t\t\t\tstats: options || []\n\t\t\t});\n\t\t});\n\n\t\t(0, _helper.checkPropChange)(this.props.dataField, nextProps.dataField, function () {\n\t\t\t_this2.updateQueryOptions(nextProps);\n\t\t\t_this2.handleChange(_this2.state.currentValue, nextProps);\n\t\t});\n\n\t\tif (!(0, _helper.isEqual)(this.props.defaultSelected, nextProps.defaultSelected)) {\n\t\t\tthis.handleChange([nextProps.defaultSelected.start, nextProps.defaultSelected.end], nextProps);\n\t\t} else if (!(0, _helper.isEqual)(this.state.currentValue, nextProps.selectedValue)) {\n\t\t\tthis.handleChange(nextProps.selectedValue || [nextProps.range.start, nextProps.range.end]);\n\t\t}\n\t};\n\n\tRangeSlider.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {\n\t\tvar upperLimit = Math.floor((nextProps.range.end - nextProps.range.start) / 2);\n\t\tif (nextProps.stepValue < 1 || nextProps.stepValue > upperLimit) {\n\t\t\tconsole.warn('stepValue for RangeSlider ' + nextProps.componentId + ' should be greater than 0 and less than or equal to ' + upperLimit);\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tRangeSlider.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t\tthis.props.removeComponent(this.internalComponent);\n\t};\n\n\tRangeSlider.prototype.render = function render() {\n\t\tvar _this3 = this;\n\n\t\treturn _react2.default.createElement(\n\t\t\t_Slider4.default,\n\t\t\t{ primary: true, style: this.props.style, className: this.props.className },\n\t\t\tthis.props.title && _react2.default.createElement(\n\t\t\t\t_Title2.default,\n\t\t\t\t{ className: (0, _helper.getClassName)(this.props.innerClass, 'title') || null },\n\t\t\t\tthis.props.title\n\t\t\t),\n\t\t\tthis.state.stats.length && this.props.showHistogram && this.props.showSlider ? _react2.default.createElement(_HistogramContainer2.default, {\n\t\t\t\tstats: this.state.stats,\n\t\t\t\trange: this.props.range,\n\t\t\t\tinterval: this.getValidInterval(this.props)\n\t\t\t}) : null,\n\t\t\tthis.props.showSlider && _react2.default.createElement(_Slider2.default, {\n\t\t\t\tmin: this.props.range.start,\n\t\t\t\tmax: this.props.range.end,\n\t\t\t\tvalues: this.state.currentValue,\n\t\t\t\tonChange: this.handleSlider,\n\t\t\t\tonValuesUpdated: this.handleDrag,\n\t\t\t\tsnap: this.props.snap,\n\t\t\t\tsnapPoints: this.props.snap ? this.getSnapPoints() : null,\n\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'slider'),\n\t\t\t\thandle: function handle(_ref) {\n\t\t\t\t\tvar className = _ref.className,\n\t\t\t\t\t    style = _ref.style,\n\t\t\t\t\t    passProps = _objectWithoutProperties(_ref, ['className', 'style']);\n\n\t\t\t\t\treturn _react2.default.createElement(_SliderHandle2.default, _extends({\n\t\t\t\t\t\tstyle: style,\n\t\t\t\t\t\tclassName: className\n\t\t\t\t\t}, passProps, {\n\t\t\t\t\t\trenderTooltipData: _this3.props.renderTooltipData,\n\t\t\t\t\t\ttooltipTrigger: _this3.props.tooltipTrigger\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}),\n\t\t\tthis.props.rangeLabels && this.props.showSlider && _react2.default.createElement(\n\t\t\t\t'div',\n\t\t\t\t{ className: _Label.rangeLabelsContainer },\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_RangeLabel2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\talign: 'left',\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n\t\t\t\t\t},\n\t\t\t\t\tthis.props.rangeLabels.start\n\t\t\t\t),\n\t\t\t\t_react2.default.createElement(\n\t\t\t\t\t_RangeLabel2.default,\n\t\t\t\t\t{\n\t\t\t\t\t\talign: 'right',\n\t\t\t\t\t\tclassName: (0, _helper.getClassName)(this.props.innerClass, 'label') || null\n\t\t\t\t\t},\n\t\t\t\t\tthis.props.rangeLabels.end\n\t\t\t\t)\n\t\t\t)\n\t\t);\n\t};\n\n\treturn RangeSlider;\n}(_react.Component);\n\nRangeSlider.parseValue = function (value, props) {\n\treturn value ? [value.start, value.end] : [props.range.start, props.range.end];\n};\n\nRangeSlider.defaultQuery = function (value, props) {\n\tif (Array.isArray(value) && value.length) {\n\t\tvar _range;\n\n\t\treturn {\n\t\t\trange: (_range = {}, _range[props.dataField] = {\n\t\t\t\tgte: value[0],\n\t\t\t\tlte: value[1],\n\t\t\t\tboost: 2.0\n\t\t\t}, _range)\n\t\t};\n\t}\n\treturn null;\n};\n\nvar _initialiseProps = function _initialiseProps() {\n\tvar _this4 = this;\n\n\tthis.setReact = function (props) {\n\t\tvar react = props.react;\n\n\t\tif (react) {\n\t\t\tvar newReact = (0, _helper.pushToAndClause)(react, _this4.internalComponent);\n\t\t\tprops.watchComponent(props.componentId, newReact);\n\t\t} else {\n\t\t\tprops.watchComponent(props.componentId, {\n\t\t\t\tand: _this4.internalComponent\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.getSnapPoints = function () {\n\t\tvar snapPoints = [];\n\t\tvar stepValue = _this4.props.stepValue;\n\n\t\t// limit the number of steps to prevent generating a large number of snapPoints\n\n\t\tif ((_this4.props.range.end - _this4.props.range.start) / stepValue > 100) {\n\t\t\tstepValue = (_this4.props.range.end - _this4.props.range.start) / 100;\n\t\t}\n\n\t\tfor (var i = _this4.props.range.start; i <= _this4.props.range.end; i += stepValue) {\n\t\t\tsnapPoints = snapPoints.concat(i);\n\t\t}\n\t\tif (snapPoints[snapPoints.length - 1] !== _this4.props.range.end) {\n\t\t\tsnapPoints = snapPoints.concat(_this4.props.range.end);\n\t\t}\n\t\treturn snapPoints;\n\t};\n\n\tthis.getValidInterval = function (props) {\n\t\tvar min = Math.ceil((props.range.end - props.range.start) / 100) || 1;\n\t\tif (!props.interval) {\n\t\t\treturn min;\n\t\t} else if (props.interval < min) {\n\t\t\tconsole.error(props.componentId + ': interval prop\\'s value should be greater than or equal to ' + min);\n\t\t\treturn min;\n\t\t}\n\t\treturn props.interval;\n\t};\n\n\tthis.histogramQuery = function (props) {\n\t\tvar _ref2;\n\n\t\treturn _ref2 = {}, _ref2[props.dataField] = {\n\t\t\thistogram: {\n\t\t\t\tfield: props.dataField,\n\t\t\t\tinterval: _this4.getValidInterval(props),\n\t\t\t\toffset: props.range.start\n\t\t\t}\n\t\t}, _ref2;\n\t};\n\n\tthis.handleChange = function (currentValue) {\n\t\tvar props = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this4.props;\n\n\t\t// ignore state updates when component is locked\n\t\tif (props.beforeValueChange && _this4.locked) {\n\t\t\treturn;\n\t\t}\n\n\t\t_this4.locked = true;\n\t\tvar performUpdate = function performUpdate() {\n\t\t\t_this4.setState({\n\t\t\t\tcurrentValue: currentValue\n\t\t\t}, function () {\n\t\t\t\t_this4.updateQuery([currentValue[0], currentValue[1]], props);\n\t\t\t\t_this4.locked = false;\n\t\t\t\tif (props.onValueChange) {\n\t\t\t\t\tprops.onValueChange({\n\t\t\t\t\t\tstart: currentValue[0],\n\t\t\t\t\t\tend: currentValue[1]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\t(0, _helper.checkValueChange)(props.componentId, {\n\t\t\tstart: currentValue[0],\n\t\t\tend: currentValue[1]\n\t\t}, props.beforeValueChange, performUpdate);\n\t};\n\n\tthis.handleSlider = function (_ref3) {\n\t\tvar values = _ref3.values;\n\n\t\tif (!(0, _helper.isEqual)(values, _this4.state.currentValue)) {\n\t\t\t_this4.handleChange(values);\n\t\t}\n\t};\n\n\tthis.handleDrag = function (values) {\n\t\tif (_this4.props.onDrag) {\n\t\t\tvar min = values.min,\n\t\t\t    max = values.max,\n\t\t\t    currentValue = values.values;\n\n\t\t\t_this4.props.onDrag(currentValue, [min, max]);\n\t\t}\n\t};\n\n\tthis.updateQuery = function (value, props) {\n\t\tvar query = props.customQuery || RangeSlider.defaultQuery;\n\t\tvar showFilter = props.showFilter,\n\t\t    _props$range = props.range,\n\t\t    start = _props$range.start,\n\t\t    end = _props$range.end;\n\t\tvar currentStart = value[0],\n\t\t    currentEnd = value[1];\n\t\t// check if the slider is at its initial position\n\n\t\tvar isInitialValue = currentStart === start && currentEnd === end;\n\t\tprops.updateQuery({\n\t\t\tcomponentId: props.componentId,\n\t\t\tquery: query(value, props),\n\t\t\tvalue: value,\n\t\t\tlabel: props.filterLabel,\n\t\t\tshowFilter: showFilter && !isInitialValue,\n\t\t\tURLParams: props.URLParams,\n\t\t\tcomponentType: 'RANGESLIDER'\n\t\t});\n\t};\n\n\tthis.updateQueryOptions = function (props) {\n\t\tif (props.showHistogram) {\n\t\t\tvar queryOptions = {\n\t\t\t\tsize: 0,\n\t\t\t\taggs: (props.histogramQuery || _this4.histogramQuery)(props)\n\t\t\t};\n\n\t\t\tprops.setQueryOptions(_this4.internalComponent, queryOptions, false);\n\n\t\t\tvar query = props.customQuery || RangeSlider.defaultQuery;\n\n\t\t\tprops.updateQuery({\n\t\t\t\tcomponentId: _this4.internalComponent,\n\t\t\t\tquery: query([props.range.start, props.range.end], props)\n\t\t\t});\n\t\t}\n\t};\n};\n\nRangeSlider.propTypes = {\n\taddComponent: _types2.default.funcRequired,\n\tremoveComponent: _types2.default.funcRequired,\n\tsetQueryListener: _types2.default.funcRequired,\n\tsetQueryOptions: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\twatchComponent: _types2.default.funcRequired,\n\toptions: _types2.default.options,\n\tselectedValue: _types2.default.selectedValue,\n\t// component props\n\tbeforeValueChange: _types2.default.func,\n\tclassName: _types2.default.string,\n\tcomponentId: _types2.default.stringRequired,\n\tcustomQuery: _types2.default.func,\n\tdataField: _types2.default.stringRequired,\n\tdefaultSelected: _types2.default.range,\n\tfilterLabel: _types2.default.string,\n\tinnerClass: _types2.default.style,\n\tinterval: _types2.default.number,\n\tonDrag: _types2.default.func,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\trange: _types2.default.range,\n\trangeLabels: _types2.default.rangeLabels,\n\treact: _types2.default.react,\n\tshowHistogram: _types2.default.bool,\n\thistogramQuery: _types2.default.func,\n\tshowFilter: _types2.default.bool,\n\tshowSlider: _types2.default.bool,\n\ttooltipTrigger: _types2.default.tooltipTrigger,\n\trenderTooltipData: _types2.default.func,\n\tsnap: _types2.default.bool,\n\tstepValue: _types2.default.number,\n\tstyle: _types2.default.style,\n\ttitle: _types2.default.title,\n\tURLParams: _types2.default.bool\n};\n\nRangeSlider.defaultProps = {\n\tclassName: null,\n\trange: {\n\t\tstart: 0,\n\t\tend: 10\n\t},\n\tshowHistogram: true,\n\tshowSlider: true,\n\ttooltipTrigger: 'none',\n\tsnap: true,\n\tstepValue: 1,\n\tshowFilter: true,\n\tstyle: {},\n\tURLParams: false\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\toptions: state.aggregations[props.componentId] ? state.aggregations[props.componentId][props.dataField] && state.aggregations[props.componentId][props.dataField].buckets // eslint-disable-line\n\t\t: [],\n\t\tselectedValue: state.selectedValues[props.componentId] ? state.selectedValues[props.componentId].value : null\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\taddComponent: function addComponent(component) {\n\t\t\treturn dispatch((0, _actions.addComponent)(component));\n\t\t},\n\t\tremoveComponent: function removeComponent(component) {\n\t\t\treturn dispatch((0, _actions.removeComponent)(component));\n\t\t},\n\t\tsetQueryOptions: function setQueryOptions(component, props, execute) {\n\t\t\treturn dispatch((0, _actions.setQueryOptions)(component, props, execute));\n\t\t},\n\t\tsetQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n\t\t\treturn dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\twatchComponent: function watchComponent(component, react) {\n\t\t\treturn dispatch((0, _actions.watchComponent)(component, react));\n\t\t}\n\t};\n};\n\nexports.default = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(RangeSlider);"]},"metadata":{},"sourceType":"script"}