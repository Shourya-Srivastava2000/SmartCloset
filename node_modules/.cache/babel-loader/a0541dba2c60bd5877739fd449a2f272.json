{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar flatten = function flatten(arr) {\n  return arr.reduce(function (flat, toFlatten) {\n    return flat.concat(Array.isArray(toFlatten) ? flatten(toFlatten) : toFlatten);\n  }, []);\n};\n\nvar extractSuggestion = function extractSuggestion(val) {\n  switch (typeof val) {\n    case 'string':\n      return val;\n\n    case 'object':\n      if (Array.isArray(val)) {\n        return flatten(val);\n      }\n\n      return null;\n\n    default:\n      return val;\n  }\n};\n\nvar getSuggestions = function getSuggestions(fields, suggestions, currentValue) {\n  var suggestionProperties = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n  var suggestionsList = [];\n  var labelsList = [];\n\n  var populateSuggestionsList = function populateSuggestionsList(val, source) {\n    var isWordMatch = currentValue.trim().split(' ').some(function (term) {\n      return String(val).toLowerCase().includes(term);\n    });\n\n    if (isWordMatch && !labelsList.includes(val)) {\n      var defaultOption = {\n        label: val,\n        value: val,\n        source: source\n      };\n      var additionalKeys = {};\n\n      if (Array.isArray(suggestionProperties) && suggestionProperties.length > 0) {\n        suggestionProperties.forEach(function (prop) {\n          if (source.hasOwnProperty(prop)) {\n            additionalKeys = _extends({}, additionalKeys, _defineProperty({}, prop, source[prop]));\n          }\n        });\n      }\n\n      var option = _extends({}, defaultOption, additionalKeys);\n\n      labelsList = [].concat(_toConsumableArray(labelsList), [val]);\n      suggestionsList = [].concat(_toConsumableArray(suggestionsList), [option]);\n    }\n  };\n\n  var parseField = function parseField(source, field) {\n    if (typeof source === 'object') {\n      var fieldNodes = field.split('.');\n      var label = source[fieldNodes[0]];\n\n      if (label) {\n        if (fieldNodes.length > 1) {\n          var children = field.substring(fieldNodes[0].length + 1);\n\n          if (Array.isArray(label)) {\n            label.forEach(function (arrayItem) {\n              parseField(arrayItem, children);\n            });\n          } else {\n            parseField(label, children);\n          }\n        } else {\n          var val = extractSuggestion(label);\n\n          if (val) {\n            if (Array.isArray(val)) {\n              val.forEach(function (suggestion) {\n                return populateSuggestionsList(suggestion, source);\n              });\n            } else {\n              populateSuggestionsList(val, source);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  suggestions.forEach(function (item) {\n    fields.forEach(function (field) {\n      parseField(item._source, field);\n    });\n  });\n  return suggestionsList;\n};\n\nexports.default = getSuggestions;","map":{"version":3,"sources":["C:/Users/porto/info340-code/pod/340/node_modules/@appbaseio/reactivecore/lib/utils/suggestions.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_toConsumableArray","arr","Array","isArray","arr2","from","_defineProperty","obj","enumerable","configurable","writable","flatten","reduce","flat","toFlatten","concat","extractSuggestion","val","getSuggestions","fields","suggestions","currentValue","suggestionProperties","undefined","suggestionsList","labelsList","populateSuggestionsList","isWordMatch","trim","split","some","term","String","toLowerCase","includes","defaultOption","label","additionalKeys","forEach","prop","option","parseField","field","fieldNodes","children","substring","arrayItem","suggestion","item","_source","default"],"mappings":"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","sourcesContent":["Object.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i];}return arr2;}else{return Array.from(arr);}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var flatten=function flatten(arr){return arr.reduce(function(flat,toFlatten){return flat.concat(Array.isArray(toFlatten)?flatten(toFlatten):toFlatten);},[]);};var extractSuggestion=function extractSuggestion(val){switch(typeof val){case'string':return val;case'object':if(Array.isArray(val)){return flatten(val);}return null;default:return val;}};var getSuggestions=function getSuggestions(fields,suggestions,currentValue){var suggestionProperties=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];var suggestionsList=[];var labelsList=[];var populateSuggestionsList=function populateSuggestionsList(val,source){var isWordMatch=currentValue.trim().split(' ').some(function(term){return String(val).toLowerCase().includes(term);});if(isWordMatch&&!labelsList.includes(val)){var defaultOption={label:val,value:val,source:source};var additionalKeys={};if(Array.isArray(suggestionProperties)&&suggestionProperties.length>0){suggestionProperties.forEach(function(prop){if(source.hasOwnProperty(prop)){additionalKeys=_extends({},additionalKeys,_defineProperty({},prop,source[prop]));}});}var option=_extends({},defaultOption,additionalKeys);labelsList=[].concat(_toConsumableArray(labelsList),[val]);suggestionsList=[].concat(_toConsumableArray(suggestionsList),[option]);}};var parseField=function parseField(source,field){if(typeof source==='object'){var fieldNodes=field.split('.');var label=source[fieldNodes[0]];if(label){if(fieldNodes.length>1){var children=field.substring(fieldNodes[0].length+1);if(Array.isArray(label)){label.forEach(function(arrayItem){parseField(arrayItem,children);});}else{parseField(label,children);}}else{var val=extractSuggestion(label);if(val){if(Array.isArray(val)){val.forEach(function(suggestion){return populateSuggestionsList(suggestion,source);});}else{populateSuggestionsList(val,source);}}}}}};suggestions.forEach(function(item){fields.forEach(function(field){parseField(item._source,field);});});return suggestionsList;};exports.default=getSuggestions;"]},"metadata":{},"sourceType":"script"}