{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar DataController = function (_Component) {\n  _inherits(DataController, _Component);\n\n  function DataController() {\n    var _temp, _this, _ret;\n\n    _classCallCheck(this, DataController);\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.updateQuery = function () {\n      var defaultSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var props = arguments[1];\n      _this.locked = true;\n      var query = props.customQuery || DataController.defaultQuery;\n\n      var performUpdate = function performUpdate() {\n        props.updateQuery({\n          componentId: props.componentId,\n          query: query(defaultSelected, props),\n          value: defaultSelected,\n          label: props.filterLabel,\n          showFilter: props.showFilter,\n          URLParams: props.URLParams\n        });\n        _this.locked = false;\n        if (props.onValueChange) props.onValueChange(defaultSelected);\n      };\n\n      (0, _helper.checkValueChange)(props.componentId, defaultSelected, props.beforeValueChange, performUpdate);\n    }, _temp), _possibleConstructorReturn(_this, _ret);\n  }\n\n  DataController.prototype.componentDidMount = function componentDidMount() {\n    this.locked = false;\n    this.props.addComponent(this.props.componentId);\n    this.props.setQueryListener(this.props.componentId, this.props.onQueryChange, null);\n\n    if (this.props.defaultSelected) {\n      this.updateQuery(this.props.defaultSelected, this.props);\n    } else {\n      this.updateQuery(null, this.props);\n    }\n  };\n\n  DataController.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n    if (!this.locked) {\n      if (!(0, _helper.isEqual)(this.props.defaultSelected, nextProps.defaultSelected)) {\n        this.updateQuery(nextProps.defaultSelected, nextProps);\n      } else if (!(0, _helper.isEqual)(this.props.selectedValue, nextProps.selectedValue)) {\n        this.updateQuery(nextProps.selectedValue, nextProps);\n      }\n    }\n  };\n\n  DataController.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.removeComponent(this.props.componentId);\n  };\n\n  DataController.defaultQuery = function defaultQuery() {\n    return {\n      match_all: {}\n    };\n  };\n\n  DataController.prototype.render = function render() {\n    return _react2.default.createElement(_Container2.default, {\n      style: this.props.style,\n      className: this.props.className\n    }, this.props.children);\n  };\n\n  return DataController;\n}(_react.Component);\n\nDataController.defaultProps = {\n  className: null,\n  showFilter: true,\n  style: {},\n  URLParams: false\n};\nDataController.propTypes = {\n  addComponent: _types2.default.funcRequired,\n  removeComponent: _types2.default.funcRequired,\n  setQueryListener: _types2.default.funcRequired,\n  updateQuery: _types2.default.funcRequired,\n  selectedValue: _types2.default.selectedValue,\n  // component props\n  componentId: _types2.default.stringRequired,\n  beforeValueChange: _types2.default.func,\n  children: _types2.default.children,\n  className: _types2.default.string,\n  customQuery: _types2.default.func,\n  // DataController can accept any defaultSelected depending on the query used\n  defaultSelected: _types2.default.any,\n  // eslint-disable-line\n  filterLabel: _types2.default.string,\n  onQueryChange: _types2.default.func,\n  onValueChange: _types2.default.func,\n  showFilter: _types2.default.bool,\n  style: _types2.default.style,\n  URLParams: _types2.default.bool\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  return {\n    selectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null\n  };\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n  return {\n    addComponent: function addComponent(component) {\n      return dispatch((0, _actions.addComponent)(component));\n    },\n    removeComponent: function removeComponent(component) {\n      return dispatch((0, _actions.removeComponent)(component));\n    },\n    updateQuery: function updateQuery(updateQueryObject) {\n      return dispatch((0, _actions.updateQuery)(updateQueryObject));\n    },\n    setQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n      return dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n    }\n  };\n};\n\nexports.default = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(DataController);","map":{"version":3,"sources":["C:/Users/porto/info340-code/pod/340/node_modules/@appbaseio/reactivesearch/lib/components/basic/DataController.js"],"names":["exports","__esModule","_react","require","_react2","_interopRequireDefault","_actions","_helper","_types","_types2","_Container","_Container2","_utils","obj","default","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","DataController","_Component","_temp","_this","_ret","_len","arguments","length","args","Array","_key","apply","concat","updateQuery","defaultSelected","undefined","props","locked","query","customQuery","defaultQuery","performUpdate","componentId","label","filterLabel","showFilter","URLParams","onValueChange","checkValueChange","beforeValueChange","componentDidMount","addComponent","setQueryListener","onQueryChange","componentWillReceiveProps","nextProps","isEqual","selectedValue","componentWillUnmount","removeComponent","match_all","render","createElement","style","className","children","Component","defaultProps","propTypes","funcRequired","stringRequired","func","string","any","bool","mapStateToProps","state","selectedValues","mapDispatchtoProps","dispatch","component","updateQueryObject","beforeQueryChange","connect"],"mappings":"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","sourcesContent":["'use strict';\n\nexports.__esModule = true;\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _actions = require('@appbaseio/reactivecore/lib/actions');\n\nvar _helper = require('@appbaseio/reactivecore/lib/utils/helper');\n\nvar _types = require('@appbaseio/reactivecore/lib/utils/types');\n\nvar _types2 = _interopRequireDefault(_types);\n\nvar _Container = require('../../styles/Container');\n\nvar _Container2 = _interopRequireDefault(_Container);\n\nvar _utils = require('../../utils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar DataController = function (_Component) {\n\t_inherits(DataController, _Component);\n\n\tfunction DataController() {\n\t\tvar _temp, _this, _ret;\n\n\t\t_classCallCheck(this, DataController);\n\n\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\targs[_key] = arguments[_key];\n\t\t}\n\n\t\treturn _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.updateQuery = function () {\n\t\t\tvar defaultSelected = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\t\tvar props = arguments[1];\n\n\t\t\t_this.locked = true;\n\t\t\tvar query = props.customQuery || DataController.defaultQuery;\n\n\t\t\tvar performUpdate = function performUpdate() {\n\t\t\t\tprops.updateQuery({\n\t\t\t\t\tcomponentId: props.componentId,\n\t\t\t\t\tquery: query(defaultSelected, props),\n\t\t\t\t\tvalue: defaultSelected,\n\t\t\t\t\tlabel: props.filterLabel,\n\t\t\t\t\tshowFilter: props.showFilter,\n\t\t\t\t\tURLParams: props.URLParams\n\t\t\t\t});\n\t\t\t\t_this.locked = false;\n\t\t\t\tif (props.onValueChange) props.onValueChange(defaultSelected);\n\t\t\t};\n\n\t\t\t(0, _helper.checkValueChange)(props.componentId, defaultSelected, props.beforeValueChange, performUpdate);\n\t\t}, _temp), _possibleConstructorReturn(_this, _ret);\n\t}\n\n\tDataController.prototype.componentDidMount = function componentDidMount() {\n\t\tthis.locked = false;\n\t\tthis.props.addComponent(this.props.componentId);\n\t\tthis.props.setQueryListener(this.props.componentId, this.props.onQueryChange, null);\n\n\t\tif (this.props.defaultSelected) {\n\t\t\tthis.updateQuery(this.props.defaultSelected, this.props);\n\t\t} else {\n\t\t\tthis.updateQuery(null, this.props);\n\t\t}\n\t};\n\n\tDataController.prototype.componentWillReceiveProps = function componentWillReceiveProps(nextProps) {\n\t\tif (!this.locked) {\n\t\t\tif (!(0, _helper.isEqual)(this.props.defaultSelected, nextProps.defaultSelected)) {\n\t\t\t\tthis.updateQuery(nextProps.defaultSelected, nextProps);\n\t\t\t} else if (!(0, _helper.isEqual)(this.props.selectedValue, nextProps.selectedValue)) {\n\t\t\t\tthis.updateQuery(nextProps.selectedValue, nextProps);\n\t\t\t}\n\t\t}\n\t};\n\n\tDataController.prototype.componentWillUnmount = function componentWillUnmount() {\n\t\tthis.props.removeComponent(this.props.componentId);\n\t};\n\n\tDataController.defaultQuery = function defaultQuery() {\n\t\treturn {\n\t\t\tmatch_all: {}\n\t\t};\n\t};\n\n\tDataController.prototype.render = function render() {\n\t\treturn _react2.default.createElement(\n\t\t\t_Container2.default,\n\t\t\t{ style: this.props.style, className: this.props.className },\n\t\t\tthis.props.children\n\t\t);\n\t};\n\n\treturn DataController;\n}(_react.Component);\n\nDataController.defaultProps = {\n\tclassName: null,\n\tshowFilter: true,\n\tstyle: {},\n\tURLParams: false\n};\n\nDataController.propTypes = {\n\taddComponent: _types2.default.funcRequired,\n\tremoveComponent: _types2.default.funcRequired,\n\tsetQueryListener: _types2.default.funcRequired,\n\tupdateQuery: _types2.default.funcRequired,\n\tselectedValue: _types2.default.selectedValue,\n\t// component props\n\tcomponentId: _types2.default.stringRequired,\n\tbeforeValueChange: _types2.default.func,\n\tchildren: _types2.default.children,\n\tclassName: _types2.default.string,\n\tcustomQuery: _types2.default.func,\n\t// DataController can accept any defaultSelected depending on the query used\n\tdefaultSelected: _types2.default.any, // eslint-disable-line\n\tfilterLabel: _types2.default.string,\n\tonQueryChange: _types2.default.func,\n\tonValueChange: _types2.default.func,\n\tshowFilter: _types2.default.bool,\n\tstyle: _types2.default.style,\n\tURLParams: _types2.default.bool\n};\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n\treturn {\n\t\tselectedValue: state.selectedValues[props.componentId] && state.selectedValues[props.componentId].value || null\n\t};\n};\n\nvar mapDispatchtoProps = function mapDispatchtoProps(dispatch) {\n\treturn {\n\t\taddComponent: function addComponent(component) {\n\t\t\treturn dispatch((0, _actions.addComponent)(component));\n\t\t},\n\t\tremoveComponent: function removeComponent(component) {\n\t\t\treturn dispatch((0, _actions.removeComponent)(component));\n\t\t},\n\t\tupdateQuery: function updateQuery(updateQueryObject) {\n\t\t\treturn dispatch((0, _actions.updateQuery)(updateQueryObject));\n\t\t},\n\t\tsetQueryListener: function setQueryListener(component, onQueryChange, beforeQueryChange) {\n\t\t\treturn dispatch((0, _actions.setQueryListener)(component, onQueryChange, beforeQueryChange));\n\t\t}\n\t};\n};\n\nexports.default = (0, _utils.connect)(mapStateToProps, mapDispatchtoProps)(DataController);"]},"metadata":{},"sourceType":"script"}